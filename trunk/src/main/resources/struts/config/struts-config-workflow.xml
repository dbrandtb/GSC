<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN" "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
    <include file="struts-default.xml" />

    <package name="configworkflow" extends="json-default" namespace="/configworkflow">
            
         <interceptors>
            <interceptor-stack name="defaultStack">
                <interceptor-ref name="exception" />
                <interceptor-ref name="alias" />
                <interceptor-ref name="servletConfig" />
                <interceptor-ref name="prepare" />
                <interceptor-ref name="i18n" />
                <interceptor-ref name="chain" />
                <interceptor-ref name="modelDriven" />
                <interceptor-ref name="fileUpload" />
                <interceptor-ref name="staticParams" />
                <interceptor-ref name="params" />
                <interceptor-ref name="conversionError" />
                <interceptor-ref name="validation">
                    <param name="excludeMethods">consultar,cancel,execute,delete,edit,list</param>
                </interceptor-ref>
                <interceptor-ref name="workflow">
                    <param name="excludeMethods">input,back,cancel</param>
                </interceptor-ref>
            </interceptor-stack>
        </interceptors>
        
        <!--
            Redireccionamiento de action a jsp de configuracion
        -->
        <action name="configuraWorkflow" class="configuraWorkflow">
            <result name="success">/jsp/configurador/configworkflow/configWorkflowPs1.jsp</result>
            <result name="input">/jsp/configurador/configworkflow/configWorkflowPs1.jsp</result>
        </action>

        <!--
            Configuracion del action para cargar el combo de Aseguradora dependiendo del Cliente
            existentes en los combos con tipo de Respuesta Json 
        -->
        <action name="obtenerProcesos" class="configuraWorkflow" method="consultarJson">
            <result name="success" type="json" />
        </action>
        
        <!--
            Configuracion del action para cargar el combo de Aseguradora dependiendo del Cliente
            existentes en los combos con tipo de Respuesta Json 
        -->
        <action name="obtenerComboProceso" class="configuraWorkflow" method="obtenComboProceso">
            <result name="success" type="json" />
        </action>
        
        <!--
            Configuracion del action para cargar el combo de Aseguradora dependiendo del Cliente
            existentes en los combos con tipo de Respuesta Json 
        -->
        <action name="obtenerComboCliente" class="configuraWorkflow" method="obtenComboCliente">
            <result name="success" type="json" />
        </action>
        
        <!--
            Configuracion del action para cargar el combo de Aseguradora dependiendo del Cliente
            existentes en los combos con tipo de Respuesta Json 
        -->
        <action name="obtenerComboAseguradora" class="configuraWorkflow" method="obtenComboAseguradora">
            <result name="success" type="json" />
        </action>
        
        <!--
            Configuracion del action para cargar combo de Producto dependiendo de Cliente y 
            Aseguradora con tipo de Respuesta Json 
        -->
        <action name="obtenerComboProducto" class="configuraWorkflow" method="obtenComboProducto">
            <result name="success" type="json" />
        </action>
        
        <!--
            Configuracion del action para cargar combo de Producto dependiendo de Cliente y 
            Aseguradora con tipo de Respuesta Json 
        -->
        <action name="insertaProceso" class="configuraWorkflow" method="insertaProceso">
            <result name="success" type="json" />
        </action>
        
        <!--
            Configuracion del action para cargar combo de Producto dependiendo de Cliente y 
            Aseguradora con tipo de Respuesta Json 
        -->
        <action name="borraProceso" class="configuraWorkflow" method="borraProceso">
            <result name="success" type="json" />
        </action>
        
        <!--
            Redireccionamiento de action a jsp de Pasos Por Cuenta
        -->
        <action name="configuraWorkflowPasos" class="configuraWorkflowPasos">
            <result name="success">/jsp/configurador/configworkflow/configWorkflowPs2.jsp</result>
            <result name="input">/jsp/configurador/configworkflow/configWorkflowPs2.jsp</result>
        </action>
        
        <!--
            Configuracion del action para cargar el combo de Aseguradora dependiendo del Cliente
            existentes en los combos con tipo de Respuesta Json 
        -->
        <action name="obtenerPasos" class="configuraWorkflowPasos" method="consultarJson">
            <result name="success" type="json" />
        </action>
        
        <!--
            Configuracion del action para cargar el combo de Aseguradora dependiendo del Cliente
            existentes en los combos con tipo de Respuesta Json 
        -->
        <action name="comboPantallas" class="configuraWorkflowPasos" method="obtenComboPantallas">
            <result name="success" type="json" />
        </action>
        
        <!--
            Configuracion del action para cargar el combo de Aseguradora dependiendo del Cliente
            existentes en los combos con tipo de Respuesta Json 
        -->
        <action name="insertaPasos" class="configuraWorkflowPasos" method="insertaPasos">
            <result name="success" type="json" />
        </action>
        
        <!--
            Configuracion del action para cargar el combo de Aseguradora dependiendo del Cliente
            existentes en los combos con tipo de Respuesta Json 
        -->
        <action name="editaPasos" class="configuraWorkflowPasos" method="editaPasos">
            <result name="success" type="json" />
        </action>
        
        <!--
            Configuracion del action para cargar el combo de Aseguradora dependiendo del Cliente
            existentes en los combos con tipo de Respuesta Json 
        -->
        <action name="borraPasos" class="configuraWorkflowPasos" method="borraPasos">
            <result name="success" type="json" />
        </action>
        
        <!--
            Redireccionamiento de action a jsp de Pasos Por Cuenta
        -->
        <action name="configuraWorkflowOpciones" class="configuraWorkflowOpciones">
            <result name="success">/jsp/configurador/configworkflow/configWorkflowPs3.jsp</result>
            <result name="input">/jsp/configurador/configworkflow/configWorkflowPs3.jsp</result>
        </action>
        
        <!--
            Configuracion del action para cargar el combo de Aseguradora dependiendo del Cliente
            existentes en los combos con tipo de Respuesta Json 
        -->
        <action name="comboPasos" class="configuraWorkflowOpciones" method="obtenComboPasos">
            <result name="success" type="json" />
        </action>
        
        <!--
            Configuracion del action para cargar el combo de Aseguradora dependiendo del Cliente
            existentes en los combos con tipo de Respuesta Json 
        -->
        <action name="agregarConfig" class="configuraWorkflowOpciones" method="agregarConfig">
            <result name="success" type="json" />
        </action>
        
        <!--
            Redireccionamiento de action a jsp de Pasos Por Cuenta
        -->
        <action name="configuraWorkflowVistaPrevia" class="configuraWorkflowVistaPrevia">
            <result name="success">/jsp/configurador/configworkflow/configWorkflowVistaCompleta.jsp</result>
            <result name="input">/jsp/configurador/configworkflow/configWorkflowVistaCompleta.jsp</result>
        </action>
        
        <!--
            Configuracion del action para cargar el combo de Aseguradora dependiendo del Cliente
            existentes en los combos con tipo de Respuesta Json 
        -->
        <action name="vistaCompletaWF" class="configuraWorkflowVistaPrevia" method="consultarJson">
            <result name="success" type="json" />
        </action>
        
        <action name="dummy" class="configuraWorkflowVistaPrevia" method="params">
            <result name="success" type="json" />
        </action>
        
        <!--  
        Configuración del Action para la exportación del documentos, se tiene que
        declarar como tipo de respuesta "stream" y el tipo mime de retorno, asi como
        el atributo asociado al flujo de datos con el archivo y el nombre del archivo
        generado, junto con el tamaño del buffer de transferencia
        --> 
        <action name="exportWorkflow" class="exportadorAction" method="generaArchivo">
            <result name="success" type="stream">
                 <param name="contentType">${contentType}</param>
                <param name="inputName">inputStream</param>
                <param name="contentDisposition">filename="${filename}"</param>
                <param name="bufferSize">8000</param>
            </result>
        </action>
    </package>

</struts>


